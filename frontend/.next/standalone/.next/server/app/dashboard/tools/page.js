(()=>{var e={};e.id=139,e.ids=[139],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8295:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=t(7096),i=t(6132),n=t(7284),a=t.n(n),o=t(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let c=["",{children:["dashboard",{children:["tools",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8634)),"C:\\Users\\Anton\\Documents\\CarbonPilot\\frontend\\src\\app\\dashboard\\tools\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"C:\\Users\\Anton\\Documents\\CarbonPilot\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,605)),"C:\\Users\\Anton\\Documents\\CarbonPilot\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Anton\\Documents\\CarbonPilot\\frontend\\src\\app\\dashboard\\tools\\page.tsx"],u="/dashboard/tools/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/tools/page",pathname:"/dashboard/tools",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6192:(e,s,t)=>{Promise.resolve().then(t.bind(t,9166))},9166:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(3854),i=t(4218),n=t(2416),a=t(9924),o=t(3110),l=t(2096),c=t(2496),d=t(2828),u=t(2747),p=t(4468),x=t(443),m=t(8521),h=t(7932),j=t(815);function f({open:e,onOpenChange:s,editingItem:t,onSuccess:l}){let{toast:c}=(0,n.p)(),[f,g]=(0,i.useState)(!1),v=(0,u.cI)({resolver:(0,p.F)(j.OJ),defaultValues:{codice:t?.codice||"",descrizione:t?.descrizione||"",lunghezza_piano:t?.lunghezza_piano||0,larghezza_piano:t?.larghezza_piano||0,disponibile:t?.disponibile??!0,in_manutenzione:t?.in_manutenzione??!1}}),b=async e=>{try{g(!0),t?(await d.UK.update(t.id,e),c({title:"Tool aggiornato",description:"Il tool \xe8 stato aggiornato con successo."})):(await d.UK.create(e),c({title:"Tool creato",description:"Il nuovo tool \xe8 stato creato con successo."})),l(),s(!1)}catch(e){console.error("Errore durante il salvataggio:",e),c({variant:"destructive",title:"Errore",description:"Si \xe8 verificato un errore durante il salvataggio."})}finally{g(!1)}};return r.jsx(m.Vq,{open:e,onOpenChange:s,children:(0,r.jsxs)(m.cZ,{className:"sm:max-w-[425px]",children:[r.jsx(m.fK,{children:r.jsx(m.$N,{children:t?"Modifica Tool":"Nuovo Tool"})}),r.jsx(h.l0,{...v,children:(0,r.jsxs)("form",{onSubmit:v.handleSubmit(b),className:"space-y-4",children:[r.jsx(h.Wi,{control:v.control,name:"codice",render:({field:e})=>(0,r.jsxs)(h.xJ,{children:[r.jsx(h.lX,{children:"Codice"}),r.jsx(h.NI,{children:r.jsx(o.I,{...e})}),r.jsx(h.zG,{})]})}),r.jsx(h.Wi,{control:v.control,name:"descrizione",render:({field:e})=>(0,r.jsxs)(h.xJ,{children:[r.jsx(h.lX,{children:"Descrizione"}),r.jsx(h.NI,{children:r.jsx(o.I,{...e})}),r.jsx(h.zG,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(h.Wi,{control:v.control,name:"lunghezza_piano",render:({field:e})=>(0,r.jsxs)(h.xJ,{children:[r.jsx(h.lX,{children:"Lunghezza Piano (mm)"}),r.jsx(h.NI,{children:r.jsx(o.I,{type:"number",...e,onChange:s=>e.onChange(Number(s.target.value))})}),r.jsx(h.zG,{})]})}),r.jsx(h.Wi,{control:v.control,name:"larghezza_piano",render:({field:e})=>(0,r.jsxs)(h.xJ,{children:[r.jsx(h.lX,{children:"Larghezza Piano (mm)"}),r.jsx(h.NI,{children:r.jsx(o.I,{type:"number",...e,onChange:s=>e.onChange(Number(s.target.value))})}),r.jsx(h.zG,{})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(h.Wi,{control:v.control,name:"disponibile",render:({field:e})=>(0,r.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(h.lX,{children:"Disponibile"})}),r.jsx(h.NI,{children:r.jsx(x.r,{checked:e.value,onCheckedChange:e.onChange})})]})}),r.jsx(h.Wi,{control:v.control,name:"in_manutenzione",render:({field:e})=>(0,r.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(h.lX,{children:"In Manutenzione"})}),r.jsx(h.NI,{children:r.jsx(x.r,{checked:e.value,onCheckedChange:e.onChange})})]})})]}),(0,r.jsxs)(m.cN,{children:[r.jsx(a.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Annulla"}),r.jsx(a.z,{type:"submit",disabled:f,children:f?"Salvataggio...":"Salva"})]})]})})]})})}function g(){let[e,s]=(0,i.useState)([]),[t,u]=(0,i.useState)(!0),[p,x]=(0,i.useState)(""),[m,h]=(0,i.useState)(!1),[j,g]=(0,i.useState)(null),{toast:v}=(0,n.p)(),b=async()=>{try{u(!0);let e=await d.UK.getAll();s(e)}catch(e){console.error("Errore nel caricamento dei tools:",e),v({variant:"destructive",title:"Errore",description:"Impossibile caricare i tools. Riprova pi\xf9 tardi."})}finally{u(!1)}};(0,i.useEffect)(()=>{b()},[]);let z=e=>{g(e),h(!0)},y=async e=>{if(window.confirm("Sei sicuro di voler eliminare questo tool?"))try{await d.UK.delete(e),v({title:"Tool eliminato",description:"Il tool \xe8 stato eliminato con successo."}),b()}catch(e){console.error("Errore durante l'eliminazione:",e),v({variant:"destructive",title:"Errore",description:"Impossibile eliminare il tool. Potrebbe essere in uso."})}},N=e.filter(e=>{let s=p.toLowerCase();return e.codice.toLowerCase().includes(s)||e.descrizione?.toLowerCase().includes(s)||!1});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tools"}),r.jsx("p",{className:"text-muted-foreground",children:"Gestisci i tools disponibili per la produzione"})]}),r.jsx(a.z,{onClick:()=>{g(null),h(!0)},children:"Nuovo Tool"})]}),r.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:r.jsx(o.I,{placeholder:"Cerca nei tools...",value:p,onChange:e=>x(e.target.value),className:"max-w-sm"})}),t?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("p",{children:"Caricamento in corso..."})}):(0,r.jsxs)(l.iA,{children:[r.jsx(l.Rn,{children:"Lista dei tools disponibili"}),r.jsx(l.xD,{children:(0,r.jsxs)(l.SC,{children:[r.jsx(l.ss,{children:"Codice"}),r.jsx(l.ss,{children:"Descrizione"}),r.jsx(l.ss,{className:"text-center",children:"Dimensioni (mm)"}),r.jsx(l.ss,{className:"text-center",children:"Stato"}),r.jsx(l.ss,{className:"text-right",children:"Azioni"})]})}),r.jsx(l.RM,{children:0===N.length?r.jsx(l.SC,{children:r.jsx(l.pj,{colSpan:5,className:"text-center py-8",children:"Nessun tool trovato"})}):N.map(e=>(0,r.jsxs)(l.SC,{children:[r.jsx(l.pj,{className:"font-medium",children:e.codice}),r.jsx(l.pj,{className:"max-w-xs truncate",children:e.descrizione||"-"}),(0,r.jsxs)(l.pj,{className:"text-center",children:[e.lunghezza_piano," x ",e.larghezza_piano]}),r.jsx(l.pj,{className:"text-center",children:(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[r.jsx(c.C,{variant:e.disponibile?"success":"destructive",children:e.disponibile?"Disponibile":"Non Disponibile"}),e.in_manutenzione&&r.jsx(c.C,{variant:"warning",children:"In Manutenzione"})]})}),r.jsx(l.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(a.z,{variant:"outline",size:"sm",onClick:()=>z(e),children:"Modifica"}),r.jsx(a.z,{variant:"destructive",size:"sm",onClick:()=>y(e.id),children:"Elimina"})]})})]},e.id))})]}),r.jsx(f,{open:m,onOpenChange:h,editingItem:j,onSuccess:b})]})}},7932:(e,s,t)=>{"use strict";t.d(s,{NI:()=>j,Wi:()=>u,l0:()=>c,lX:()=>h,xJ:()=>m,zG:()=>g});var r=t(3854),i=t(4218),n=t(5001),a=t(2747),o=t(8504),l=t(9589);let c=a.RV,d=i.createContext({}),u=({...e})=>r.jsx(d.Provider,{value:{name:e.name},children:r.jsx(a.Qr,{...e})}),p=()=>{let e=i.useContext(d),s=i.useContext(x),{getFieldState:t,formState:r}=(0,a.Gc)(),n=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=s;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},x=i.createContext({}),m=i.forwardRef(({className:e,...s},t)=>{let n=i.useId();return r.jsx(x.Provider,{value:{id:n},children:r.jsx("div",{ref:t,className:(0,o.cn)("space-y-2",e),...s})})});m.displayName="FormItem";let h=i.forwardRef(({className:e,...s},t)=>{let{error:i,formItemId:n}=p();return r.jsx(l._,{ref:t,className:(0,o.cn)(i&&"text-destructive",e),htmlFor:n,...s})});h.displayName="FormLabel";let j=i.forwardRef(({...e},s)=>{let{error:t,formItemId:i,formDescriptionId:a,formMessageId:o}=p();return r.jsx(n.Slot,{ref:s,id:i,"aria-describedby":t?`${a} ${o}`:`${a}`,"aria-invalid":!!t,...e})});j.displayName="FormControl";let f=i.forwardRef(({className:e,...s},t)=>{let{formDescriptionId:i}=p();return r.jsx("p",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",e),...s})});f.displayName="FormDescription";let g=i.forwardRef(({className:e,children:s,...t},i)=>{let{error:n,formMessageId:a}=p(),l=n?String(n?.message):s;return l?r.jsx("p",{ref:i,id:a,className:(0,o.cn)("text-sm font-medium text-destructive",e),...t,children:l}):null});g.displayName="FormMessage"},443:(e,s,t)=>{"use strict";t.d(s,{r:()=>N});var r=t(3854),i=t(4218),n=t(4667),a=t(1951),o=t(5864),l=t(6026),c=t(24),d=t(5440),u=t(9280),p="Switch",[x,m]=(0,o.b)(p),[h,j]=x(p),f=i.forwardRef((e,s)=>{let{__scopeSwitch:t,name:o,checked:c,defaultChecked:d,required:x,disabled:m,value:j="on",onCheckedChange:f,form:g,...v}=e,[y,N]=i.useState(null),_=(0,a.e)(s,e=>N(e)),C=i.useRef(!1),w=!y||g||!!y.closest("form"),[I,R]=(0,l.T)({prop:c,defaultProp:d??!1,onChange:f,caller:p});return(0,r.jsxs)(h,{scope:t,checked:I,disabled:m,children:[(0,r.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":I,"aria-required":x,"data-state":z(I),"data-disabled":m?"":void 0,disabled:m,value:j,...v,ref:_,onClick:(0,n.M)(e.onClick,e=>{R(e=>!e),w&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),w&&(0,r.jsx)(b,{control:y,bubbles:!C.current,name:o,value:j,checked:I,required:x,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});f.displayName=p;var g="SwitchThumb",v=i.forwardRef((e,s)=>{let{__scopeSwitch:t,...i}=e,n=j(g,t);return(0,r.jsx)(u.WV.span,{"data-state":z(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})});v.displayName=g;var b=i.forwardRef(({__scopeSwitch:e,control:s,checked:t,bubbles:n=!0,...o},l)=>{let u=i.useRef(null),p=(0,a.e)(u,l),x=(0,c.D)(t),m=(0,d.t)(s);return i.useEffect(()=>{let e=u.current;if(!e)return;let s=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(s,"checked"),i=r.set;if(x!==t&&i){let s=new Event("click",{bubbles:n});i.call(e,t),e.dispatchEvent(s)}},[x,t,n]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...o,tabIndex:-1,ref:p,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function z(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var y=t(8504);let N=i.forwardRef(({className:e,...s},t)=>r.jsx(f,{className:(0,y.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:r.jsx(v,{className:(0,y.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));N.displayName=f.displayName},815:(e,s,t)=>{"use strict";t.d(s,{OJ:()=>i,wl:()=>n});var r=t(1460);let i=r.Ry({codice:r.Z_().min(1,"Il codice \xe8 obbligatorio"),descrizione:r.Z_().optional(),lunghezza_piano:r.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:r.Rx().min(0,"La larghezza deve essere positiva"),disponibile:r.O7().default(!0),in_manutenzione:r.O7().default(!1)}),n=r.Ry({nome:r.Z_().min(1,"Il nome \xe8 obbligatorio"),temperatura_stasi1:r.Rx().min(0,"La temperatura deve essere positiva"),pressione_stasi1:r.Rx().min(0,"La pressione deve essere positiva"),durata_stasi1:r.Rx().min(1,"La durata deve essere almeno 1 minuto"),attiva_stasi2:r.O7(),temperatura_stasi2:r.Rx().min(0,"La temperatura deve essere positiva").optional(),pressione_stasi2:r.Rx().min(0,"La pressione deve essere positiva").optional(),durata_stasi2:r.Rx().min(1,"La durata deve essere almeno 1 minuto").optional()});r.Ry({nome:r.Z_().min(1,"Il nome \xe8 obbligatorio"),codice:r.Z_().min(1,"Il codice \xe8 obbligatorio"),lunghezza:r.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:r.Rx().min(0,"La larghezza deve essere positiva"),num_linee_vuoto:r.Rx().min(0,"Il numero di linee deve essere positivo"),temperatura_max:r.Rx().min(0,"La temperatura deve essere positiva"),pressione_max:r.Rx().min(0,"La pressione deve essere positiva"),stato:r.Km(["DISPONIBILE","IN_USO","MANUTENZIONE","GUASTO","SPENTA"]),produttore:r.Z_().optional(),anno_produzione:r.Rx().optional(),note:r.Z_().optional()})},8634:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>a,__esModule:()=>n,default:()=>l});var r=t(5153);let i=(0,r.createProxy)(String.raw`C:\Users\Anton\Documents\CarbonPilot\frontend\src\app\dashboard\tools\page.tsx`),{__esModule:n,$$typeof:a}=i,o=i.default,l=o}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[926,642,703,460,788,694],()=>t(8295));module.exports=r})();