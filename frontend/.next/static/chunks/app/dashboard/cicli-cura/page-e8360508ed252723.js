(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{6652:function(e,t,s){Promise.resolve().then(s.bind(s,2927))},2927:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),i=s(4622),n=s(3089),l=s(6582),o=s(5271),c=s(150),d=s(1865),u=s(8110),m=s(4813),x=s(1472),h=s(2021),p=s(6454),j=s(5268);function v(e){var t;let{open:s,onOpenChange:o,editingItem:c,onSuccess:v}=e,{toast:f}=(0,i.p)(),[g,b]=(0,a.useState)(!1),N=(0,d.cI)({resolver:(0,u.F)(j.wl),defaultValues:{nome:(null==c?void 0:c.nome)||"",temperatura_stasi1:(null==c?void 0:c.temperatura_stasi1)||0,pressione_stasi1:(null==c?void 0:c.pressione_stasi1)||0,durata_stasi1:(null==c?void 0:c.durata_stasi1)||0,attiva_stasi2:null!==(t=null==c?void 0:c.attiva_stasi2)&&void 0!==t&&t,temperatura_stasi2:(null==c?void 0:c.temperatura_stasi2)||0,pressione_stasi2:(null==c?void 0:c.pressione_stasi2)||0,durata_stasi2:(null==c?void 0:c.durata_stasi2)||0}}),_=async e=>{try{b(!0),c?(await p.iE.update(c.id,e),f({title:"Ciclo aggiornato",description:"Il ciclo di cura \xe8 stato aggiornato con successo."})):(await p.iE.create(e),f({title:"Ciclo creato",description:"Il nuovo ciclo di cura \xe8 stato creato con successo."})),v(),o(!1)}catch(e){console.error("Errore durante il salvataggio:",e),f({variant:"destructive",title:"Errore",description:"Si \xe8 verificato un errore durante il salvataggio."})}finally{b(!1)}},y=N.watch("attiva_stasi2")?Math.max(N.watch("temperatura_stasi1"),N.watch("temperatura_stasi2")||0):N.watch("temperatura_stasi1"),C=N.watch("attiva_stasi2")?Math.max(N.watch("pressione_stasi1"),N.watch("pressione_stasi2")||0):N.watch("pressione_stasi1");return(0,r.jsx)(x.Vq,{open:s,onOpenChange:o,children:(0,r.jsxs)(x.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsx)(x.fK,{children:(0,r.jsx)(x.$N,{children:c?"Modifica Ciclo":"Nuovo Ciclo"})}),(0,r.jsx)(h.l0,{...N,children:(0,r.jsxs)("form",{onSubmit:N.handleSubmit(_),className:"space-y-4",children:[(0,r.jsx)(h.Wi,{control:N.control,name:"nome",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Nome"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{...t})}),(0,r.jsx)(h.zG,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Temperatura Max (\xb0C)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",value:y,readOnly:!0,className:"bg-muted"})})]}),(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Pressione Max (bar)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",value:C,readOnly:!0,className:"bg-muted"})})]})]}),(0,r.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Stasi 1"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)(h.Wi,{control:N.control,name:"temperatura_stasi1",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Temperatura (\xb0C)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}}),(0,r.jsx)(h.Wi,{control:N.control,name:"pressione_stasi1",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Pressione (bar)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}}),(0,r.jsx)(h.Wi,{control:N.control,name:"durata_stasi1",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Durata (min)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}})]})]}),(0,r.jsx)(h.Wi,{control:N.control,name:"attiva_stasi2",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,r.jsx)("div",{className:"space-y-0.5",children:(0,r.jsx)(h.lX,{children:"Attiva Stasi 2"})}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(m.r,{checked:t.value,onCheckedChange:t.onChange})})]})}}),N.watch("attiva_stasi2")&&(0,r.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Stasi 2"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)(h.Wi,{control:N.control,name:"temperatura_stasi2",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Temperatura (\xb0C)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}}),(0,r.jsx)(h.Wi,{control:N.control,name:"pressione_stasi2",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Pressione (bar)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}}),(0,r.jsx)(h.Wi,{control:N.control,name:"durata_stasi2",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.lX,{children:"Durata (min)"}),(0,r.jsx)(h.NI,{children:(0,r.jsx)(l.I,{type:"number",...t,onChange:e=>t.onChange(Number(e.target.value))})}),(0,r.jsx)(h.zG,{})]})}})]})]}),(0,r.jsx)(x.cN,{children:(0,r.jsx)(n.z,{type:"submit",disabled:g,children:g?"Salvataggio...":c?"Aggiorna":"Crea"})})]})})]})})}function f(){let[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),[j,f]=(0,a.useState)(null),{toast:g}=(0,i.p)(),b=async()=>{try{d(!0);let e=await p.iE.getAll();t(e)}catch(e){console.error("Errore nel caricamento dei cicli:",e),g({variant:"destructive",title:"Errore",description:"Impossibile caricare i cicli di cura. Riprova pi\xf9 tardi."})}finally{d(!1)}};(0,a.useEffect)(()=>{b()},[]);let N=e=>{f(e),h(!0)},_=async e=>{if(window.confirm("Sei sicuro di voler eliminare questo ciclo?"))try{await p.iE.delete(e),g({title:"Ciclo eliminato",description:"Il ciclo di cura \xe8 stato eliminato con successo."}),b()}catch(e){console.error("Errore durante l'eliminazione:",e),g({variant:"destructive",title:"Errore",description:"Impossibile eliminare il ciclo. Potrebbe essere in uso."})}},y=e.filter(e=>{let t=u.toLowerCase();return e.nome.toLowerCase().includes(t)});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Cicli di Cura"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Gestisci i cicli di cura disponibili"})]}),(0,r.jsx)(n.z,{onClick:()=>{f(null),h(!0)},children:"Nuovo Ciclo"})]}),(0,r.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,r.jsx)(l.I,{placeholder:"Cerca nei cicli...",value:u,onChange:e=>m(e.target.value),className:"max-w-sm"})}),s?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("p",{children:"Caricamento in corso..."})}):(0,r.jsxs)(o.iA,{children:[(0,r.jsx)(o.Rn,{children:"Lista dei cicli di cura disponibili"}),(0,r.jsx)(o.xD,{children:(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.ss,{children:"Nome"}),(0,r.jsx)(o.ss,{className:"text-center",children:"Stasi 1"}),(0,r.jsx)(o.ss,{className:"text-center",children:"Stasi 2"}),(0,r.jsx)(o.ss,{className:"text-right",children:"Azioni"})]})}),(0,r.jsx)(o.RM,{children:0===y.length?(0,r.jsx)(o.SC,{children:(0,r.jsx)(o.pj,{colSpan:6,className:"text-center py-8",children:"Nessun ciclo trovato"})}):y.map(e=>(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.pj,{className:"font-medium",children:e.nome}),(0,r.jsxs)(o.pj,{className:"text-center",children:[e.temperatura_stasi1,"\xb0C / ",e.pressione_stasi1," bar / ",e.durata_stasi1," min"]}),(0,r.jsx)(o.pj,{className:"text-center",children:e.attiva_stasi2?(0,r.jsxs)(r.Fragment,{children:[e.temperatura_stasi2,"\xb0C / ",e.pressione_stasi2," bar / ",e.durata_stasi2," min",(0,r.jsx)(c.C,{variant:"secondary",className:"ml-2",children:"Attiva"})]}):(0,r.jsx)(c.C,{variant:"outline",children:"Disattiva"})}),(0,r.jsx)(o.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>N(e),children:"Modifica"}),(0,r.jsx)(n.z,{variant:"destructive",size:"sm",onClick:()=>_(e.id),children:"Elimina"})]})})]},e.id))})]}),(0,r.jsx)(v,{open:x,onOpenChange:h,editingItem:j,onSuccess:b})]})}},2021:function(e,t,s){"use strict";s.d(t,{NI:function(){return j},Wi:function(){return u},l0:function(){return c},lX:function(){return p},xJ:function(){return h},zG:function(){return f}});var r=s(7437),a=s(2265),i=s(7256),n=s(1865),l=s(345),o=s(6429);let c=n.RV,d=a.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(n.Qr,{...t})})},m=()=>{let e=a.useContext(d),t=a.useContext(x),{getFieldState:s,formState:r}=(0,n.Gc)(),i=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=a.createContext({}),h=a.forwardRef((e,t)=>{let{className:s,...i}=e,n=a.useId();return(0,r.jsx)(x.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",s),...i})})});h.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e,{error:i,formItemId:n}=m();return(0,r.jsx)(o._,{ref:t,className:(0,l.cn)(i&&"text-destructive",s),htmlFor:n,...a})});p.displayName="FormLabel";let j=a.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:n,formDescriptionId:l,formMessageId:o}=m();return(0,r.jsx)(i.Slot,{ref:t,id:n,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...s})});j.displayName="FormControl";let v=a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:i}=m();return(0,r.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});v.displayName="FormDescription";let f=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e,{error:n,formMessageId:o}=m(),c=n?String(null==n?void 0:n.message):a;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",s),...i,children:c}):null});f.displayName="FormMessage"},4813:function(e,t,s){"use strict";s.d(t,{r:function(){return y}});var r=s(7437),a=s(2265),i=s(5744),n=s(2210),l=s(6989),o=s(3763),c=s(5184),d=s(4977),u=s(9381),m="Switch",[x,h]=(0,l.b)(m),[p,j]=x(m),v=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:l,checked:c,defaultChecked:d,required:x,disabled:h,value:j="on",onCheckedChange:v,form:f,...g}=e,[_,y]=a.useState(null),C=(0,n.e)(t,e=>y(e)),w=a.useRef(!1),I=!_||f||!!_.closest("form"),[z,R]=(0,o.T)({prop:c,defaultProp:d??!1,onChange:v,caller:m});return(0,r.jsxs)(p,{scope:s,checked:z,disabled:h,children:[(0,r.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":z,"aria-required":x,"data-state":N(z),"data-disabled":h?"":void 0,disabled:h,value:j,...g,ref:C,onClick:(0,i.M)(e.onClick,e=>{R(e=>!e),I&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),I&&(0,r.jsx)(b,{control:_,bubbles:!w.current,name:l,value:j,checked:z,required:x,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});v.displayName=m;var f="SwitchThumb",g=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,i=j(f,s);return(0,r.jsx)(u.WV.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});g.displayName=f;var b=a.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:i=!0,...l},o)=>{let u=a.useRef(null),m=(0,n.e)(u,o),x=(0,c.D)(s),h=(0,d.t)(t);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked"),a=r.set;if(x!==s&&a){let t=new Event("click",{bubbles:i});a.call(e,s),e.dispatchEvent(t)}},[x,s,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:m,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var _=s(345);let y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(v,{className:(0,_.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,r.jsx)(g,{className:(0,_.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});y.displayName=v.displayName},5268:function(e,t,s){"use strict";s.d(t,{OJ:function(){return a},wl:function(){return i}});var r=s(4578);let a=r.Ry({codice:r.Z_().min(1,"Il codice \xe8 obbligatorio"),descrizione:r.Z_().optional(),lunghezza_piano:r.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:r.Rx().min(0,"La larghezza deve essere positiva"),disponibile:r.O7().default(!0),in_manutenzione:r.O7().default(!1)}),i=r.Ry({nome:r.Z_().min(1,"Il nome \xe8 obbligatorio"),temperatura_stasi1:r.Rx().min(0,"La temperatura deve essere positiva"),pressione_stasi1:r.Rx().min(0,"La pressione deve essere positiva"),durata_stasi1:r.Rx().min(1,"La durata deve essere almeno 1 minuto"),attiva_stasi2:r.O7(),temperatura_stasi2:r.Rx().min(0,"La temperatura deve essere positiva").optional(),pressione_stasi2:r.Rx().min(0,"La pressione deve essere positiva").optional(),durata_stasi2:r.Rx().min(1,"La durata deve essere almeno 1 minuto").optional()});r.Ry({nome:r.Z_().min(1,"Il nome \xe8 obbligatorio"),codice:r.Z_().min(1,"Il codice \xe8 obbligatorio"),lunghezza:r.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:r.Rx().min(0,"La larghezza deve essere positiva"),num_linee_vuoto:r.Rx().min(0,"Il numero di linee deve essere positivo"),temperatura_max:r.Rx().min(0,"La temperatura deve essere positiva"),pressione_max:r.Rx().min(0,"La pressione deve essere positiva"),stato:r.Km(["DISPONIBILE","IN_USO","MANUTENZIONE","GUASTO","SPENTA"]),produttore:r.Z_().optional(),anno_produzione:r.Rx().optional(),note:r.Z_().optional()})}},function(e){e.O(0,[310,710,408,578,67,662,971,472,744],function(){return e(e.s=6652)}),_N_E=e.O()}]);