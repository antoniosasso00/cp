(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{6652:function(e,s,t){Promise.resolve().then(t.bind(t,2927))},2927:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),r=t(2265),i=t(4622),n=t(3089),l=t(6582),o=t(5271),c=t(150),d=t(1865),u=t(8110),m=t(4813),x=t(1472),h=t(2021),p=t(6454),j=t(5268);function v(e){var s;let{open:t,onOpenChange:o,editingItem:c,onSuccess:v}=e,{toast:f}=(0,i.p)(),[g,b]=(0,r.useState)(!1),N=(0,d.cI)({resolver:(0,u.F)(j.wl),defaultValues:{nome:(null==c?void 0:c.nome)||"",temperatura_stasi1:(null==c?void 0:c.temperatura_stasi1)||0,pressione_stasi1:(null==c?void 0:c.pressione_stasi1)||0,durata_stasi1:(null==c?void 0:c.durata_stasi1)||0,attiva_stasi2:null!==(s=null==c?void 0:c.attiva_stasi2)&&void 0!==s&&s,temperatura_stasi2:(null==c?void 0:c.temperatura_stasi2)||0,pressione_stasi2:(null==c?void 0:c.pressione_stasi2)||0,durata_stasi2:(null==c?void 0:c.durata_stasi2)||0}}),_=async e=>{try{b(!0),c?(await p.iE.update(c.id,e),f({title:"Ciclo aggiornato",description:"Il ciclo di cura \xe8 stato aggiornato con successo."})):(await p.iE.create(e),f({title:"Ciclo creato",description:"Il nuovo ciclo di cura \xe8 stato creato con successo."})),v(),o(!1)}catch(e){console.error("Errore durante il salvataggio:",e),f({variant:"destructive",title:"Errore",description:"Si \xe8 verificato un errore durante il salvataggio."})}finally{b(!1)}},w=N.watch("attiva_stasi2")?Math.max(N.watch("temperatura_stasi1"),N.watch("temperatura_stasi2")||0):N.watch("temperatura_stasi1"),y=N.watch("attiva_stasi2")?Math.max(N.watch("pressione_stasi1"),N.watch("pressione_stasi2")||0):N.watch("pressione_stasi1");return(0,a.jsx)(x.Vq,{open:t,onOpenChange:o,children:(0,a.jsxs)(x.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(x.fK,{children:(0,a.jsx)(x.$N,{children:c?"Modifica Ciclo":"Nuovo Ciclo"})}),(0,a.jsx)(h.l0,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(_),className:"space-y-4",children:[(0,a.jsx)(h.Wi,{control:N.control,name:"nome",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Nome"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{...s})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Temperatura Max (\xb0C)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",value:w,readOnly:!0,className:"bg-muted"})})]}),(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Pressione Max (bar)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",value:y,readOnly:!0,className:"bg-muted"})})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Stasi 1"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)(h.Wi,{control:N.control,name:"temperatura_stasi1",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Temperatura (\xb0C)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:N.control,name:"pressione_stasi1",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Pressione (bar)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:N.control,name:"durata_stasi1",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Durata (min)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}})]})]}),(0,a.jsx)(h.Wi,{control:N.control,name:"attiva_stasi2",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsx)("div",{className:"space-y-0.5",children:(0,a.jsx)(h.lX,{children:"Attiva Stasi 2"})}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(m.r,{checked:s.value,onCheckedChange:s.onChange})})]})}}),N.watch("attiva_stasi2")&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Stasi 2"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)(h.Wi,{control:N.control,name:"temperatura_stasi2",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Temperatura (\xb0C)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:N.control,name:"pressione_stasi2",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Pressione (bar)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:N.control,name:"durata_stasi2",render:e=>{let{field:s}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Durata (min)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(l.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value))})}),(0,a.jsx)(h.zG,{})]})}})]})]}),(0,a.jsx)(x.cN,{children:(0,a.jsx)(n.z,{type:"submit",disabled:g,children:g?"Salvataggio...":c?"Aggiorna":"Crea"})})]})})]})})}var f=t(6264),g=t(7472),b=t(3905),N=t(5367),_=t(9346);function w(){let[e,s]=(0,r.useState)([]),[t,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),{toast:y}=(0,i.p)(),C=async()=>{try{d(!0);let e=await p.iE.getAll();s(e)}catch(e){console.error("Errore nel caricamento dei cicli:",e),y({variant:"destructive",title:"Errore",description:"Impossibile caricare i cicli di cura. Riprova pi\xf9 tardi."})}finally{d(!1)}};(0,r.useEffect)(()=>{C()},[]);let I=e=>{w(e),h(!0)},z=async e=>{if(window.confirm("Sei sicuro di voler eliminare questo ciclo?"))try{await p.iE.delete(e),y({variant:"success",title:"Ciclo eliminato",description:"Il ciclo di cura \xe8 stato eliminato con successo."}),C()}catch(e){console.error("Errore durante l'eliminazione:",e),y({variant:"destructive",title:"Errore",description:"Impossibile eliminare il ciclo. Potrebbe essere in uso."})}},R=e.filter(e=>{let s=u.toLowerCase();return e.nome.toLowerCase().includes(s)});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Cicli di Cura"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Gestisci i cicli di cura disponibili"})]}),(0,a.jsx)(n.z,{onClick:()=>{w(null),h(!0)},children:"Nuovo Ciclo"})]}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,a.jsx)(l.I,{placeholder:"Cerca nei cicli...",value:u,onChange:e=>m(e.target.value),className:"max-w-sm"})}),t?(0,a.jsxs)("div",{className:"flex justify-center py-8",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2",children:"Caricamento in corso..."})]}):(0,a.jsxs)(o.iA,{children:[(0,a.jsx)(o.Rn,{children:"Lista dei cicli di cura disponibili"}),(0,a.jsx)(o.xD,{children:(0,a.jsxs)(o.SC,{children:[(0,a.jsx)(o.ss,{children:"Nome"}),(0,a.jsx)(o.ss,{className:"text-center",children:"Stasi 1"}),(0,a.jsx)(o.ss,{className:"text-center",children:"Stasi 2"}),(0,a.jsx)(o.ss,{className:"text-right",children:"Azioni"})]})}),(0,a.jsx)(o.RM,{children:0===R.length?(0,a.jsx)(o.SC,{children:(0,a.jsx)(o.pj,{colSpan:6,className:"text-center py-8",children:"Nessun ciclo trovato"})}):R.map(e=>(0,a.jsxs)(o.SC,{children:[(0,a.jsx)(o.pj,{className:"font-medium",children:e.nome}),(0,a.jsxs)(o.pj,{className:"text-center",children:[e.temperatura_stasi1,"\xb0C / ",e.pressione_stasi1," bar / ",e.durata_stasi1," min"]}),(0,a.jsx)(o.pj,{className:"text-center",children:e.attiva_stasi2?(0,a.jsxs)(a.Fragment,{children:[e.temperatura_stasi2,"\xb0C / ",e.pressione_stasi2," bar / ",e.durata_stasi2," min",(0,a.jsx)(c.C,{variant:"secondary",className:"ml-2",children:"Attiva"})]}):(0,a.jsx)(c.C,{variant:"outline",children:"Disattiva"})}),(0,a.jsx)(o.pj,{className:"text-right",children:(0,a.jsxs)(_.h_,{children:[(0,a.jsx)(_.$F,{asChild:!0,children:(0,a.jsx)(n.z,{variant:"ghost",size:"icon",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(_.AW,{align:"end",children:[(0,a.jsxs)(_.Xi,{onClick:()=>I(e),children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Modifica"})]}),(0,a.jsxs)(_.Xi,{onClick:()=>z(e.id),className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Elimina"})]})]})]})})]},e.id))})]}),(0,a.jsx)(v,{open:x,onOpenChange:h,editingItem:j,onSuccess:C})]})}},2021:function(e,s,t){"use strict";t.d(s,{NI:function(){return j},Wi:function(){return u},l0:function(){return c},lX:function(){return p},xJ:function(){return h},zG:function(){return f}});var a=t(7437),r=t(2265),i=t(7256),n=t(1865),l=t(345),o=t(6429);let c=n.RV,d=r.createContext({}),u=e=>{let{...s}=e;return(0,a.jsx)(d.Provider,{value:{name:s.name},children:(0,a.jsx)(n.Qr,{...s})})},m=()=>{let e=r.useContext(d),s=r.useContext(x),{getFieldState:t,formState:a}=(0,n.Gc)(),i=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=s;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=r.createContext({}),h=r.forwardRef((e,s)=>{let{className:t,...i}=e,n=r.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,l.cn)("space-y-2",t),...i})})});h.displayName="FormItem";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:i,formItemId:n}=m();return(0,a.jsx)(o._,{ref:s,className:(0,l.cn)(i&&"text-destructive",t),htmlFor:n,...r})});p.displayName="FormLabel";let j=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:n,formDescriptionId:l,formMessageId:o}=m();return(0,a.jsx)(i.Slot,{ref:s,id:n,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...t})});j.displayName="FormControl";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:i}=m();return(0,a.jsx)("p",{ref:s,id:i,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});v.displayName="FormDescription";let f=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e,{error:n,formMessageId:o}=m(),c=n?String(null==n?void 0:n.message):r;return c?(0,a.jsx)("p",{ref:s,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",t),...i,children:c}):null});f.displayName="FormMessage"},4813:function(e,s,t){"use strict";t.d(s,{r:function(){return w}});var a=t(7437),r=t(2265),i=t(5744),n=t(2210),l=t(6989),o=t(3763),c=t(5184),d=t(4977),u=t(9381),m="Switch",[x,h]=(0,l.b)(m),[p,j]=x(m),v=r.forwardRef((e,s)=>{let{__scopeSwitch:t,name:l,checked:c,defaultChecked:d,required:x,disabled:h,value:j="on",onCheckedChange:v,form:f,...g}=e,[_,w]=r.useState(null),y=(0,n.e)(s,e=>w(e)),C=r.useRef(!1),I=!_||f||!!_.closest("form"),[z,R]=(0,o.T)({prop:c,defaultProp:d??!1,onChange:v,caller:m});return(0,a.jsxs)(p,{scope:t,checked:z,disabled:h,children:[(0,a.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":z,"aria-required":x,"data-state":N(z),"data-disabled":h?"":void 0,disabled:h,value:j,...g,ref:y,onClick:(0,i.M)(e.onClick,e=>{R(e=>!e),I&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),I&&(0,a.jsx)(b,{control:_,bubbles:!C.current,name:l,value:j,checked:z,required:x,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});v.displayName=m;var f="SwitchThumb",g=r.forwardRef((e,s)=>{let{__scopeSwitch:t,...r}=e,i=j(f,t);return(0,a.jsx)(u.WV.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});g.displayName=f;var b=r.forwardRef(({__scopeSwitch:e,control:s,checked:t,bubbles:i=!0,...l},o)=>{let u=r.useRef(null),m=(0,n.e)(u,o),x=(0,c.D)(t),h=(0,d.t)(s);return r.useEffect(()=>{let e=u.current;if(!e)return;let s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked"),r=a.set;if(x!==t&&r){let s=new Event("click",{bubbles:i});r.call(e,t),e.dispatchEvent(s)}},[x,t,i]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...l,tabIndex:-1,ref:m,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var _=t(345);let w=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v,{className:(0,_.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(g,{className:(0,_.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});w.displayName=v.displayName},5268:function(e,s,t){"use strict";t.d(s,{OJ:function(){return r},wl:function(){return i}});var a=t(4578);let r=a.Ry({codice:a.Z_().min(1,"Il codice \xe8 obbligatorio"),descrizione:a.Z_().optional(),lunghezza_piano:a.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:a.Rx().min(0,"La larghezza deve essere positiva"),disponibile:a.O7().default(!0),in_manutenzione:a.O7().default(!1)}),i=a.Ry({nome:a.Z_().min(1,"Il nome \xe8 obbligatorio"),temperatura_stasi1:a.Rx().min(0,"La temperatura deve essere positiva"),pressione_stasi1:a.Rx().min(0,"La pressione deve essere positiva"),durata_stasi1:a.Rx().min(1,"La durata deve essere almeno 1 minuto"),attiva_stasi2:a.O7(),temperatura_stasi2:a.Rx().min(0,"La temperatura deve essere positiva").optional(),pressione_stasi2:a.Rx().min(0,"La pressione deve essere positiva").optional(),durata_stasi2:a.Rx().min(1,"La durata deve essere almeno 1 minuto").optional()});a.Ry({nome:a.Z_().min(1,"Il nome \xe8 obbligatorio"),codice:a.Z_().min(1,"Il codice \xe8 obbligatorio"),lunghezza:a.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:a.Rx().min(0,"La larghezza deve essere positiva"),num_linee_vuoto:a.Rx().min(0,"Il numero di linee deve essere positivo"),temperatura_max:a.Rx().min(0,"La temperatura deve essere positiva"),pressione_max:a.Rx().min(0,"La pressione deve essere positiva"),stato:a.Km(["DISPONIBILE","IN_USO","MANUTENZIONE","GUASTO","SPENTA"]),produttore:a.Z_().optional(),anno_produzione:a.Rx().optional(),note:a.Z_().optional()})}},function(e){e.O(0,[310,621,709,936,537,578,36,934,971,472,744],function(){return e(e.s=6652)}),_N_E=e.O()}]);