(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{1770:function(e,i,n){Promise.resolve().then(n.bind(n,3729))},3729:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return v}});var t=n(7437),r=n(2265),s=n(4622),a=n(3089),o=n(6582),l=n(5271),c=n(150),d=n(6454),u=n(1865),m=n(8110),x=n(4813),p=n(1472),h=n(2021),f=n(5268);function j(e){var i,n;let{open:l,onOpenChange:c,editingItem:j,onSuccess:v}=e,{toast:g}=(0,s.p)(),[b,z]=(0,r.useState)(!1),N=(0,u.cI)({resolver:(0,m.F)(f.OJ),defaultValues:{codice:(null==j?void 0:j.codice)||"",descrizione:(null==j?void 0:j.descrizione)||"",lunghezza_piano:(null==j?void 0:j.lunghezza_piano)||0,larghezza_piano:(null==j?void 0:j.larghezza_piano)||0,disponibile:null===(i=null==j?void 0:j.disponibile)||void 0===i||i,in_manutenzione:null!==(n=null==j?void 0:j.in_manutenzione)&&void 0!==n&&n}}),y=async e=>{try{z(!0),j?(await d.UK.update(j.id,e),g({title:"Tool aggiornato",description:"Il tool \xe8 stato aggiornato con successo."})):(await d.UK.create(e),g({title:"Tool creato",description:"Il nuovo tool \xe8 stato creato con successo."})),v(),c(!1)}catch(e){console.error("Errore durante il salvataggio:",e),g({variant:"destructive",title:"Errore",description:"Si \xe8 verificato un errore durante il salvataggio."})}finally{z(!1)}};return(0,t.jsx)(p.Vq,{open:l,onOpenChange:c,children:(0,t.jsxs)(p.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(p.fK,{children:(0,t.jsx)(p.$N,{children:j?"Modifica Tool":"Nuovo Tool"})}),(0,t.jsx)(h.l0,{...N,children:(0,t.jsxs)("form",{onSubmit:N.handleSubmit(y),className:"space-y-4",children:[(0,t.jsx)(h.Wi,{control:N.control,name:"codice",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{children:[(0,t.jsx)(h.lX,{children:"Codice"}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(o.I,{...i})}),(0,t.jsx)(h.zG,{})]})}}),(0,t.jsx)(h.Wi,{control:N.control,name:"descrizione",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{children:[(0,t.jsx)(h.lX,{children:"Descrizione"}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(o.I,{...i})}),(0,t.jsx)(h.zG,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(h.Wi,{control:N.control,name:"lunghezza_piano",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{children:[(0,t.jsx)(h.lX,{children:"Lunghezza Piano (mm)"}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(o.I,{type:"number",...i,onChange:e=>i.onChange(Number(e.target.value))})}),(0,t.jsx)(h.zG,{})]})}}),(0,t.jsx)(h.Wi,{control:N.control,name:"larghezza_piano",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{children:[(0,t.jsx)(h.lX,{children:"Larghezza Piano (mm)"}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(o.I,{type:"number",...i,onChange:e=>i.onChange(Number(e.target.value))})}),(0,t.jsx)(h.zG,{})]})}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(h.Wi,{control:N.control,name:"disponibile",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,t.jsx)("div",{className:"space-y-0.5",children:(0,t.jsx)(h.lX,{children:"Disponibile"})}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(x.r,{checked:i.value,onCheckedChange:i.onChange})})]})}}),(0,t.jsx)(h.Wi,{control:N.control,name:"in_manutenzione",render:e=>{let{field:i}=e;return(0,t.jsxs)(h.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,t.jsx)("div",{className:"space-y-0.5",children:(0,t.jsx)(h.lX,{children:"In Manutenzione"})}),(0,t.jsx)(h.NI,{children:(0,t.jsx)(x.r,{checked:i.value,onCheckedChange:i.onChange})})]})}})]}),(0,t.jsxs)(p.cN,{children:[(0,t.jsx)(a.z,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Annulla"}),(0,t.jsx)(a.z,{type:"submit",disabled:b,children:b?"Salvataggio...":"Salva"})]})]})})]})})}function v(){let[e,i]=(0,r.useState)([]),[n,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),{toast:g}=(0,s.p)(),b=async()=>{try{u(!0);let e=await d.UK.getAll();i(e)}catch(e){console.error("Errore nel caricamento dei tools:",e),g({variant:"destructive",title:"Errore",description:"Impossibile caricare i tools. Riprova pi\xf9 tardi."})}finally{u(!1)}};(0,r.useEffect)(()=>{b()},[]);let z=e=>{v(e),h(!0)},N=async e=>{if(window.confirm("Sei sicuro di voler eliminare questo tool?"))try{await d.UK.delete(e),g({title:"Tool eliminato",description:"Il tool \xe8 stato eliminato con successo."}),b()}catch(e){console.error("Errore durante l'eliminazione:",e),g({variant:"destructive",title:"Errore",description:"Impossibile eliminare il tool. Potrebbe essere in uso."})}},y=e.filter(e=>{var i;let n=m.toLowerCase();return e.codice.toLowerCase().includes(n)||(null===(i=e.descrizione)||void 0===i?void 0:i.toLowerCase().includes(n))||!1});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tools"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gestisci i tools disponibili per la produzione"})]}),(0,t.jsx)(a.z,{onClick:()=>{v(null),h(!0)},children:"Nuovo Tool"})]}),(0,t.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,t.jsx)(o.I,{placeholder:"Cerca nei tools...",value:m,onChange:e=>x(e.target.value),className:"max-w-sm"})}),n?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("p",{children:"Caricamento in corso..."})}):(0,t.jsxs)(l.iA,{children:[(0,t.jsx)(l.Rn,{children:"Lista dei tools disponibili"}),(0,t.jsx)(l.xD,{children:(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.ss,{children:"Codice"}),(0,t.jsx)(l.ss,{children:"Descrizione"}),(0,t.jsx)(l.ss,{className:"text-center",children:"Dimensioni (mm)"}),(0,t.jsx)(l.ss,{className:"text-center",children:"Stato"}),(0,t.jsx)(l.ss,{className:"text-right",children:"Azioni"})]})}),(0,t.jsx)(l.RM,{children:0===y.length?(0,t.jsx)(l.SC,{children:(0,t.jsx)(l.pj,{colSpan:5,className:"text-center py-8",children:"Nessun tool trovato"})}):y.map(e=>(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.pj,{className:"font-medium",children:e.codice}),(0,t.jsx)(l.pj,{className:"max-w-xs truncate",children:e.descrizione||"-"}),(0,t.jsxs)(l.pj,{className:"text-center",children:[e.lunghezza_piano," x ",e.larghezza_piano]}),(0,t.jsx)(l.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)(c.C,{variant:e.disponibile?"success":"destructive",children:e.disponibile?"Disponibile":"Non Disponibile"}),e.in_manutenzione&&(0,t.jsx)(c.C,{variant:"warning",children:"In Manutenzione"})]})}),(0,t.jsx)(l.pj,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(a.z,{variant:"outline",size:"sm",onClick:()=>z(e),children:"Modifica"}),(0,t.jsx)(a.z,{variant:"destructive",size:"sm",onClick:()=>N(e.id),children:"Elimina"})]})})]},e.id))})]}),(0,t.jsx)(j,{open:p,onOpenChange:h,editingItem:f,onSuccess:b})]})}},2021:function(e,i,n){"use strict";n.d(i,{NI:function(){return f},Wi:function(){return u},l0:function(){return c},lX:function(){return h},xJ:function(){return p},zG:function(){return v}});var t=n(7437),r=n(2265),s=n(7256),a=n(1865),o=n(345),l=n(6429);let c=a.RV,d=r.createContext({}),u=e=>{let{...i}=e;return(0,t.jsx)(d.Provider,{value:{name:i.name},children:(0,t.jsx)(a.Qr,{...i})})},m=()=>{let e=r.useContext(d),i=r.useContext(x),{getFieldState:n,formState:t}=(0,a.Gc)(),s=n(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=i;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...s}},x=r.createContext({}),p=r.forwardRef((e,i)=>{let{className:n,...s}=e,a=r.useId();return(0,t.jsx)(x.Provider,{value:{id:a},children:(0,t.jsx)("div",{ref:i,className:(0,o.cn)("space-y-2",n),...s})})});p.displayName="FormItem";let h=r.forwardRef((e,i)=>{let{className:n,...r}=e,{error:s,formItemId:a}=m();return(0,t.jsx)(l._,{ref:i,className:(0,o.cn)(s&&"text-destructive",n),htmlFor:a,...r})});h.displayName="FormLabel";let f=r.forwardRef((e,i)=>{let{...n}=e,{error:r,formItemId:a,formDescriptionId:o,formMessageId:l}=m();return(0,t.jsx)(s.Slot,{ref:i,id:a,"aria-describedby":r?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!r,...n})});f.displayName="FormControl";let j=r.forwardRef((e,i)=>{let{className:n,...r}=e,{formDescriptionId:s}=m();return(0,t.jsx)("p",{ref:i,id:s,className:(0,o.cn)("text-sm text-muted-foreground",n),...r})});j.displayName="FormDescription";let v=r.forwardRef((e,i)=>{let{className:n,children:r,...s}=e,{error:a,formMessageId:l}=m(),c=a?String(null==a?void 0:a.message):r;return c?(0,t.jsx)("p",{ref:i,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",n),...s,children:c}):null});v.displayName="FormMessage"},4813:function(e,i,n){"use strict";n.d(i,{r:function(){return y}});var t=n(7437),r=n(2265),s=n(5744),a=n(2210),o=n(6989),l=n(3763),c=n(5184),d=n(4977),u=n(9381),m="Switch",[x,p]=(0,o.b)(m),[h,f]=x(m),j=r.forwardRef((e,i)=>{let{__scopeSwitch:n,name:o,checked:c,defaultChecked:d,required:x,disabled:p,value:f="on",onCheckedChange:j,form:v,...g}=e,[N,y]=r.useState(null),w=(0,a.e)(i,e=>y(e)),_=r.useRef(!1),C=!N||v||!!N.closest("form"),[I,k]=(0,l.T)({prop:c,defaultProp:d??!1,onChange:j,caller:m});return(0,t.jsxs)(h,{scope:n,checked:I,disabled:p,children:[(0,t.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":I,"aria-required":x,"data-state":z(I),"data-disabled":p?"":void 0,disabled:p,value:f,...g,ref:w,onClick:(0,s.M)(e.onClick,e=>{k(e=>!e),C&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),C&&(0,t.jsx)(b,{control:N,bubbles:!_.current,name:o,value:f,checked:I,required:x,disabled:p,form:v,style:{transform:"translateX(-100%)"}})]})});j.displayName=m;var v="SwitchThumb",g=r.forwardRef((e,i)=>{let{__scopeSwitch:n,...r}=e,s=f(v,n);return(0,t.jsx)(u.WV.span,{"data-state":z(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:i})});g.displayName=v;var b=r.forwardRef(({__scopeSwitch:e,control:i,checked:n,bubbles:s=!0,...o},l)=>{let u=r.useRef(null),m=(0,a.e)(u,l),x=(0,c.D)(n),p=(0,d.t)(i);return r.useEffect(()=>{let e=u.current;if(!e)return;let i=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(i,"checked"),r=t.set;if(x!==n&&r){let i=new Event("click",{bubbles:s});r.call(e,n),e.dispatchEvent(i)}},[x,n,s]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:m,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function z(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var N=n(345);let y=r.forwardRef((e,i)=>{let{className:n,...r}=e;return(0,t.jsx)(j,{className:(0,N.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:i,children:(0,t.jsx)(g,{className:(0,N.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});y.displayName=j.displayName},5268:function(e,i,n){"use strict";n.d(i,{OJ:function(){return r},wl:function(){return s}});var t=n(4578);let r=t.Ry({codice:t.Z_().min(1,"Il codice \xe8 obbligatorio"),descrizione:t.Z_().optional(),lunghezza_piano:t.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:t.Rx().min(0,"La larghezza deve essere positiva"),disponibile:t.O7().default(!0),in_manutenzione:t.O7().default(!1)}),s=t.Ry({nome:t.Z_().min(1,"Il nome \xe8 obbligatorio"),temperatura_stasi1:t.Rx().min(0,"La temperatura deve essere positiva"),pressione_stasi1:t.Rx().min(0,"La pressione deve essere positiva"),durata_stasi1:t.Rx().min(1,"La durata deve essere almeno 1 minuto"),attiva_stasi2:t.O7(),temperatura_stasi2:t.Rx().min(0,"La temperatura deve essere positiva").optional(),pressione_stasi2:t.Rx().min(0,"La pressione deve essere positiva").optional(),durata_stasi2:t.Rx().min(1,"La durata deve essere almeno 1 minuto").optional()});t.Ry({nome:t.Z_().min(1,"Il nome \xe8 obbligatorio"),codice:t.Z_().min(1,"Il codice \xe8 obbligatorio"),lunghezza:t.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:t.Rx().min(0,"La larghezza deve essere positiva"),num_linee_vuoto:t.Rx().min(0,"Il numero di linee deve essere positivo"),temperatura_max:t.Rx().min(0,"La temperatura deve essere positiva"),pressione_max:t.Rx().min(0,"La pressione deve essere positiva"),stato:t.Km(["DISPONIBILE","IN_USO","MANUTENZIONE","GUASTO","SPENTA"]),produttore:t.Z_().optional(),anno_produzione:t.Rx().optional(),note:t.Z_().optional()})}},function(e){e.O(0,[310,710,408,578,67,662,971,472,744],function(){return e(e.s=1770)}),_N_E=e.O()}]);