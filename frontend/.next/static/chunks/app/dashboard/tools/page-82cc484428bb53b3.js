(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{1770:function(e,i,n){Promise.resolve().then(n.bind(n,3729))},3729:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return w}});var s=n(7437),r=n(2265),t=n(4622),a=n(3089),o=n(6582),l=n(5271),c=n(150),d=n(6454),u=n(1865),m=n(8110),x=n(4813),h=n(1472),p=n(2021),j=n(5268);function f(e){var i,n;let{open:l,onOpenChange:c,editingItem:f,onSuccess:v}=e,{toast:g}=(0,t.p)(),[b,N]=(0,r.useState)(!1),z=(0,u.cI)({resolver:(0,m.F)(j.OJ),defaultValues:{codice:(null==f?void 0:f.codice)||"",descrizione:(null==f?void 0:f.descrizione)||"",lunghezza_piano:(null==f?void 0:f.lunghezza_piano)||0,larghezza_piano:(null==f?void 0:f.larghezza_piano)||0,disponibile:null===(i=null==f?void 0:f.disponibile)||void 0===i||i,in_manutenzione:null!==(n=null==f?void 0:f.in_manutenzione)&&void 0!==n&&n}}),w=async e=>{try{N(!0),f?(await d.UK.update(f.id,e),g({title:"Tool aggiornato",description:"Il tool \xe8 stato aggiornato con successo."})):(await d.UK.create(e),g({title:"Tool creato",description:"Il nuovo tool \xe8 stato creato con successo."})),v(),c(!1)}catch(e){console.error("Errore durante il salvataggio:",e),g({variant:"destructive",title:"Errore",description:"Si \xe8 verificato un errore durante il salvataggio."})}finally{N(!1)}};return(0,s.jsx)(h.Vq,{open:l,onOpenChange:c,children:(0,s.jsxs)(h.cZ,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(h.fK,{children:(0,s.jsx)(h.$N,{children:f?"Modifica Tool":"Nuovo Tool"})}),(0,s.jsx)(p.l0,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(w),className:"space-y-4",children:[(0,s.jsx)(p.Wi,{control:z.control,name:"codice",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Codice"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(o.I,{...i})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:z.control,name:"descrizione",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Descrizione"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(o.I,{...i})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(p.Wi,{control:z.control,name:"lunghezza_piano",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Lunghezza Piano (mm)"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(o.I,{type:"number",...i,onChange:e=>i.onChange(Number(e.target.value))})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:z.control,name:"larghezza_piano",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"Larghezza Piano (mm)"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(o.I,{type:"number",...i,onChange:e=>i.onChange(Number(e.target.value))})}),(0,s.jsx)(p.zG,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(p.Wi,{control:z.control,name:"disponibile",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsx)("div",{className:"space-y-0.5",children:(0,s.jsx)(p.lX,{children:"Disponibile"})}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(x.r,{checked:i.value,onCheckedChange:i.onChange})})]})}}),(0,s.jsx)(p.Wi,{control:z.control,name:"in_manutenzione",render:e=>{let{field:i}=e;return(0,s.jsxs)(p.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsx)("div",{className:"space-y-0.5",children:(0,s.jsx)(p.lX,{children:"In Manutenzione"})}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(x.r,{checked:i.value,onCheckedChange:i.onChange})})]})}})]}),(0,s.jsxs)(h.cN,{children:[(0,s.jsx)(a.z,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Annulla"}),(0,s.jsx)(a.z,{type:"submit",disabled:b,children:b?"Salvataggio...":"Salva"})]})]})})]})})}var v=n(6264),g=n(7472),b=n(3905),N=n(5367),z=n(9346);function w(){let[e,i]=(0,r.useState)([]),[n,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),{toast:y}=(0,t.p)(),_=async()=>{try{u(!0);let e=await d.UK.getAll();i(e)}catch(e){console.error("Errore nel caricamento dei tools:",e),y({variant:"destructive",title:"Errore",description:"Impossibile caricare i tools. Riprova pi\xf9 tardi."})}finally{u(!1)}};(0,r.useEffect)(()=>{_()},[]);let C=e=>{w(e),p(!0)},I=async e=>{if(window.confirm("Sei sicuro di voler eliminare questo tool?"))try{await d.UK.delete(e),y({variant:"success",title:"Tool eliminato",description:"Il tool \xe8 stato eliminato con successo."}),_()}catch(e){console.error("Errore durante l'eliminazione:",e),y({variant:"destructive",title:"Errore",description:"Impossibile eliminare il tool. Potrebbe essere in uso."})}},k=e.filter(e=>{var i;let n=m.toLowerCase();return e.codice.toLowerCase().includes(n)||(null===(i=e.descrizione)||void 0===i?void 0:i.toLowerCase().includes(n))||!1});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tools"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Gestisci i tools disponibili per la produzione"})]}),(0,s.jsx)(a.z,{onClick:()=>{w(null),p(!0)},children:"Nuovo Tool"})]}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,s.jsx)(o.I,{placeholder:"Cerca nei tools...",value:m,onChange:e=>x(e.target.value),className:"max-w-sm"})}),n?(0,s.jsxs)("div",{className:"flex justify-center py-8",children:[(0,s.jsx)(v.Z,{className:"h-8 w-8 animate-spin"}),(0,s.jsx)("span",{className:"ml-2",children:"Caricamento in corso..."})]}):(0,s.jsxs)(l.iA,{children:[(0,s.jsx)(l.Rn,{children:"Lista dei tools disponibili"}),(0,s.jsx)(l.xD,{children:(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.ss,{children:"Codice"}),(0,s.jsx)(l.ss,{children:"Descrizione"}),(0,s.jsx)(l.ss,{className:"text-center",children:"Dimensioni (mm)"}),(0,s.jsx)(l.ss,{className:"text-center",children:"Stato"}),(0,s.jsx)(l.ss,{className:"text-right",children:"Azioni"})]})}),(0,s.jsx)(l.RM,{children:0===k.length?(0,s.jsx)(l.SC,{children:(0,s.jsx)(l.pj,{colSpan:5,className:"text-center py-8",children:"Nessun tool trovato"})}):k.map(e=>(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.pj,{className:"font-medium",children:e.codice}),(0,s.jsx)(l.pj,{className:"max-w-xs truncate",children:e.descrizione||"-"}),(0,s.jsxs)(l.pj,{className:"text-center",children:[e.lunghezza_piano," x ",e.larghezza_piano]}),(0,s.jsx)(l.pj,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,s.jsx)(c.C,{variant:e.disponibile?"success":"destructive",children:e.disponibile?"Disponibile":"Non Disponibile"}),e.in_manutenzione&&(0,s.jsx)(c.C,{variant:"warning",children:"In Manutenzione"})]})}),(0,s.jsx)(l.pj,{className:"text-right",children:(0,s.jsxs)(z.h_,{children:[(0,s.jsx)(z.$F,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"ghost",size:"icon",children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(z.AW,{align:"end",children:[(0,s.jsxs)(z.Xi,{onClick:()=>C(e),children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Modifica"})]}),(0,s.jsxs)(z.Xi,{onClick:()=>I(e.id),className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Elimina"})]})]})]})})]},e.id))})]}),(0,s.jsx)(f,{open:h,onOpenChange:p,editingItem:j,onSuccess:_})]})}},2021:function(e,i,n){"use strict";n.d(i,{NI:function(){return j},Wi:function(){return u},l0:function(){return c},lX:function(){return p},xJ:function(){return h},zG:function(){return v}});var s=n(7437),r=n(2265),t=n(7256),a=n(1865),o=n(345),l=n(6429);let c=a.RV,d=r.createContext({}),u=e=>{let{...i}=e;return(0,s.jsx)(d.Provider,{value:{name:i.name},children:(0,s.jsx)(a.Qr,{...i})})},m=()=>{let e=r.useContext(d),i=r.useContext(x),{getFieldState:n,formState:s}=(0,a.Gc)(),t=n(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=i;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...t}},x=r.createContext({}),h=r.forwardRef((e,i)=>{let{className:n,...t}=e,a=r.useId();return(0,s.jsx)(x.Provider,{value:{id:a},children:(0,s.jsx)("div",{ref:i,className:(0,o.cn)("space-y-2",n),...t})})});h.displayName="FormItem";let p=r.forwardRef((e,i)=>{let{className:n,...r}=e,{error:t,formItemId:a}=m();return(0,s.jsx)(l._,{ref:i,className:(0,o.cn)(t&&"text-destructive",n),htmlFor:a,...r})});p.displayName="FormLabel";let j=r.forwardRef((e,i)=>{let{...n}=e,{error:r,formItemId:a,formDescriptionId:o,formMessageId:l}=m();return(0,s.jsx)(t.Slot,{ref:i,id:a,"aria-describedby":r?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!r,...n})});j.displayName="FormControl";let f=r.forwardRef((e,i)=>{let{className:n,...r}=e,{formDescriptionId:t}=m();return(0,s.jsx)("p",{ref:i,id:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...r})});f.displayName="FormDescription";let v=r.forwardRef((e,i)=>{let{className:n,children:r,...t}=e,{error:a,formMessageId:l}=m(),c=a?String(null==a?void 0:a.message):r;return c?(0,s.jsx)("p",{ref:i,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",n),...t,children:c}):null});v.displayName="FormMessage"},4813:function(e,i,n){"use strict";n.d(i,{r:function(){return w}});var s=n(7437),r=n(2265),t=n(5744),a=n(2210),o=n(6989),l=n(3763),c=n(5184),d=n(4977),u=n(9381),m="Switch",[x,h]=(0,o.b)(m),[p,j]=x(m),f=r.forwardRef((e,i)=>{let{__scopeSwitch:n,name:o,checked:c,defaultChecked:d,required:x,disabled:h,value:j="on",onCheckedChange:f,form:v,...g}=e,[z,w]=r.useState(null),y=(0,a.e)(i,e=>w(e)),_=r.useRef(!1),C=!z||v||!!z.closest("form"),[I,k]=(0,l.T)({prop:c,defaultProp:d??!1,onChange:f,caller:m});return(0,s.jsxs)(p,{scope:n,checked:I,disabled:h,children:[(0,s.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":I,"aria-required":x,"data-state":N(I),"data-disabled":h?"":void 0,disabled:h,value:j,...g,ref:y,onClick:(0,t.M)(e.onClick,e=>{k(e=>!e),C&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),C&&(0,s.jsx)(b,{control:z,bubbles:!_.current,name:o,value:j,checked:I,required:x,disabled:h,form:v,style:{transform:"translateX(-100%)"}})]})});f.displayName=m;var v="SwitchThumb",g=r.forwardRef((e,i)=>{let{__scopeSwitch:n,...r}=e,t=j(v,n);return(0,s.jsx)(u.WV.span,{"data-state":N(t.checked),"data-disabled":t.disabled?"":void 0,...r,ref:i})});g.displayName=v;var b=r.forwardRef(({__scopeSwitch:e,control:i,checked:n,bubbles:t=!0,...o},l)=>{let u=r.useRef(null),m=(0,a.e)(u,l),x=(0,c.D)(n),h=(0,d.t)(i);return r.useEffect(()=>{let e=u.current;if(!e)return;let i=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(i,"checked"),r=s.set;if(x!==n&&r){let i=new Event("click",{bubbles:t});r.call(e,n),e.dispatchEvent(i)}},[x,n,t]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:m,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var z=n(345);let w=r.forwardRef((e,i)=>{let{className:n,...r}=e;return(0,s.jsx)(f,{className:(0,z.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:i,children:(0,s.jsx)(g,{className:(0,z.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});w.displayName=f.displayName},5268:function(e,i,n){"use strict";n.d(i,{OJ:function(){return r},wl:function(){return t}});var s=n(4578);let r=s.Ry({codice:s.Z_().min(1,"Il codice \xe8 obbligatorio"),descrizione:s.Z_().optional(),lunghezza_piano:s.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:s.Rx().min(0,"La larghezza deve essere positiva"),disponibile:s.O7().default(!0),in_manutenzione:s.O7().default(!1)}),t=s.Ry({nome:s.Z_().min(1,"Il nome \xe8 obbligatorio"),temperatura_stasi1:s.Rx().min(0,"La temperatura deve essere positiva"),pressione_stasi1:s.Rx().min(0,"La pressione deve essere positiva"),durata_stasi1:s.Rx().min(1,"La durata deve essere almeno 1 minuto"),attiva_stasi2:s.O7(),temperatura_stasi2:s.Rx().min(0,"La temperatura deve essere positiva").optional(),pressione_stasi2:s.Rx().min(0,"La pressione deve essere positiva").optional(),durata_stasi2:s.Rx().min(1,"La durata deve essere almeno 1 minuto").optional()});s.Ry({nome:s.Z_().min(1,"Il nome \xe8 obbligatorio"),codice:s.Z_().min(1,"Il codice \xe8 obbligatorio"),lunghezza:s.Rx().min(0,"La lunghezza deve essere positiva"),larghezza_piano:s.Rx().min(0,"La larghezza deve essere positiva"),num_linee_vuoto:s.Rx().min(0,"Il numero di linee deve essere positivo"),temperatura_max:s.Rx().min(0,"La temperatura deve essere positiva"),pressione_max:s.Rx().min(0,"La pressione deve essere positiva"),stato:s.Km(["DISPONIBILE","IN_USO","MANUTENZIONE","GUASTO","SPENTA"]),produttore:s.Z_().optional(),anno_produzione:s.Rx().optional(),note:s.Z_().optional()})}},function(e){e.O(0,[310,621,709,936,537,578,36,934,971,472,744],function(){return e(e.s=1770)}),_N_E=e.O()}]);